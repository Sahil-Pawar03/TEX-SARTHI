<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TexSaarthi - Deliveries</title>
  <link rel="stylesheet" href="styles.css">
    <script src="auth.js" defer></script>
    <script src="api.js" defer></script>
</head>
<body>
  <aside class="sidebar">
    <div class="brand">TexSaarthi</div>
    <nav>
      <a href="index.html">Dashboard</a>
      <a href="orders.html">Orders</a>
      <a href="invoices.html">Invoices</a>
      <a href="inventory.html">Inventory</a>
      <a class="active" href="deliveries.html">Deliveries</a>
      <a href="customers.html">Customers</a>
      <a href="reports.html">Reports</a>
      <a href="settings.html">Settings</a>
    </nav>
  </aside>

  <main class="content">
    <header class="topbar">
      <h1>Delivery Management</h1>
      <div>
        <span id="welcome-user" class="hidden" style="margin-right:8px;"></span>
        <button class="btn primary">Record Delivery</button>
      </div>
    </header>

    <section class="cards">
      <div class="card blue">
        <div class="card-title">Today's Deliveries</div>
        <div class="card-value">0</div>
      </div>
      <div class="card orange">
        <div class="card-title">In Transit</div>
        <div class="card-value">1</div>
      </div>
      <div class="card green">
        <div class="card-title">Delivered</div>
        <div class="card-value">1</div>
      </div>
      <div class="card purple">
        <div class="card-title">Upcoming</div>
        <div class="card-value">0</div>
      </div>
    </section>

    <section class="grid-2">
      <div class="panel">
        <h2>Delivery Calendar</h2>
        <div class="calendar" id="calendar">
          <div style="display:flex; align-items:center; justify-content:space-between; margin-bottom:10px;">
            <button id="cal-prev" class="btn light" aria-label="Previous month">◀</button>
            <div id="cal-month" style="font-weight:600;"></div>
            <button id="cal-next" class="btn light" aria-label="Next month">▶</button>
          </div>
          <div id="cal-grid" class="calendar-grid"></div>
        </div>
      </div>
      <div class="panel">
        <h2>Today's Deliveries</h2>
        <p>No deliveries scheduled for today</p>
      </div>
    </section>

    <div class="panel">
      <h2>All Deliveries</h2>
      <table>
        <thead>
          <tr>
            <th>Order #</th>
            <th>Customer</th>
            <th>Delivery Date</th>
            <th>Time Slot</th>
            <th>Items</th>
            <th>Value</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>ORD-001</td>
            <td>Rajesh Kumar</td>
            <td>20/01/2024</td>
            <td>10:00 - 12:00</td>
            <td>3</td>
            <td>₹25,000</td>
            <td><span class="status blue">in transit</span></td>
            <td><button class="btn elevated">View</button></td>
          </tr>
          <tr>
            <td>ORD-002</td>
            <td>Priya Textiles</td>
            <td>18/01/2024</td>
            <td>12:00 - 14:00</td>
            <td>2</td>
            <td>₹45,000</td>
            <td><span class="status green">delivered</span></td>
            <td><button class="btn elevated">View</button></td>
          </tr>
        </tbody>
      </table>
    </div>
  </main>
  <script>
    (function(){
      var monthEl = document.getElementById('cal-month');
      var gridEl = document.getElementById('cal-grid');
      var prevBtn = document.getElementById('cal-prev');
      var nextBtn = document.getElementById('cal-next');
      if (!monthEl || !gridEl || !prevBtn || !nextBtn) return;

      var today = new Date();
      var current = new Date(today.getFullYear(), today.getMonth(), 1);

      function render() {
        var year = current.getFullYear();
        var month = current.getMonth();
        var monthName = current.toLocaleString(undefined, { month: 'long', year: 'numeric' });
        monthEl.textContent = monthName;

        gridEl.innerHTML = '';
        var headers = ['Su','Mo','Tu','We','Th','Fr','Sa'];
        headers.forEach(function(h){
          var cell = document.createElement('div');
          cell.textContent = h;
          gridEl.appendChild(cell);
        });

        var firstDay = new Date(year, month, 1).getDay();
        var daysInMonth = new Date(year, month + 1, 0).getDate();

        for (var i = 0; i < firstDay; i++) {
          var spacer = document.createElement('div');
          spacer.style.visibility = 'hidden';
          gridEl.appendChild(spacer);
        }
        for (var d = 1; d <= daysInMonth; d++) {
          var cell = document.createElement('div');
          cell.className = 'day';
          cell.textContent = String(d);
          if (year === today.getFullYear() && month === today.getMonth() && d === today.getDate()) {
            cell.classList.add('today');
          }
          gridEl.appendChild(cell);
        }
      }

      prevBtn.addEventListener('click', function(){
        current.setMonth(current.getMonth() - 1);
        render();
      });
      nextBtn.addEventListener('click', function(){
        current.setMonth(current.getMonth() + 1);
        render();
      });

      render();
    })();
  </script>
</body>
</html>


